usethis::use_mit_license("Eric Ekholm")
library(httr)
library(jsonlite)
library(sf)
ms_bounds <- 'https://services3.arcgis.com/TsynfzBSE6sXfoLq/ArcGIS/rest/services/Administrative/FeatureServer/10/query?outFields=*&where=1%3D1&f=json'
# tst <- GET(ms_bounds)
#
# resp <- content(tst, as  = "parsed", type = "application/json")
#
# df <- fromJSON(resp)
#this works!
tst2 <- st_read(ms_bounds)
tst <- GET(ms_bounds)
ms_meta <- 'https://services3.arcgis.com/TsynfzBSE6sXfoLq/ArcGIS/rest/services/Administrative/FeatureServer/10/'
aa <- GET(ms_meta)
View(aa$content)
?content
ms_meta <- 'https://services3.arcgis.com/TsynfzBSE6sXfoLq/ArcGIS/rest/services/Administrative/FeatureServer/10?f=pjson'
aa <- GET(ms_meta)
cont <- content(aa, as = "parsed", type = "application/json")
cont
cont$name
fetch_geospace_nms <- function(feature_num) {
url <- paste0('https://services3.arcgis.com/TsynfzBSE6sXfoLq/ArcGIS/rest/services/Administrative/FeatureServer/', feature_num, '?f=pjson')
tmp <- GET(url)
cont <- content(tmp, as = "parsed", type = "application/json")
cont$name
}
t1 <- fetch_geospace_nms(10)
t2 <- fetch_geospace_nms(9)
?safely
safe_fetch_geospace_nms <- safely(fetch_geospace_nms)
safe_fetch_geospace_nms <- purrr::safely(fetch_geospace_nms)
xx <- safe_fetch_geospace_nms(10)
xx
#trying to explore names
out <- map(1:10, safe_fetch_geospace_nms)
#trying to explore names
out <- purrr::map(1:10, safe_fetch_geospace_nms)
out
View(out)
out2 <- purrr::transpose(out)
out2$result
c(out2)
c(out2$result)
unlst(out2$result)
unlist(out2$result)
fetch_geospace_nms <- function(feature_num) {
url <- paste0('https://services3.arcgis.com/TsynfzBSE6sXfoLq/ArcGIS/rest/services/Administrative/FeatureServer/', feature_num, '?f=pjson')
tmp <- GET(url)
cont <- content(tmp, as = "parsed", type = "application/json")
cont$name
}
safe_fetch_geospace_nms <- purrr::safely(fetch_geospace_nms)
#trying to explore names
out <- purrr::map(1:100, safe_fetch_geospace_nms)
out2 <- purrr::transpose(out)
out2$result
#trying to explore names
out <- purrr::map(1:10, safe_fetch_geospace_nms)
out2 <- purrr::transpose(out)
out2
library(httr)
library(httr)
fetch_geospace_nms <- function(feature_num) {
url <- paste0('https://services3.arcgis.com/TsynfzBSE6sXfoLq/ArcGIS/rest/services/Administrative/FeatureServer/', feature_num, '?f=pjson')
tmp <- GET(url)
cont <- content(tmp, as = "parsed", type = "application/json")
cont$name
}
safe_fetch_geospace_nms <- purrr::safely(fetch_geospace_nms)
#trying to explore names
out <- purrr::map(1:100, safe_fetch_geospace_nms)
out2 <- purrr::transpose(out)
#alright -- this is the process for when I return to this
res <- unlist(out2$result)
out2$result
nominees <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2021/2021-09-21/nominees.csv')
glimpse(nominees)
dplyr::glimpse(nominees)
